# 開発における役割分担とワークフロー

本プロジェクトは、**オーナー（あなた）・ChatGPT（先生役）・Codex（実習パートナー役）** の三者で進める。  
それぞれの役割と実際の進め方を以下に定義する。

---

## あなた（オーナー）

### 出来ること
- プロジェクトの目的と方針を決定
- 最終判断（マージ、採用／却下）
- 秘密情報（APIキー、環境変数）の管理
- ChatGPTやCodexに依頼するタスクの粒度を調整

### 実際のやり方
- **GitHub管理**
  - mainブランチを保護し、必ずPR経由でマージする
  - SecretsをGitHub Actionsに設定し、コード直書きを禁止する
- **タスク管理**
  - ChatGPTと相談して「次にやること」を明確化
  - Codexに小さな単位で依頼（PRを作らせる）
- **レビュー**
  - PRのFiles changedを確認
  - 必要に応じてChatGPTに解説させ、自分でマージ判断を行う

---

## ChatGPT（先生役）

### 出来ること
- **概念や全体像の整理**
  - Git/GitHubの仕組み解説（ブランチ、PR、CIなど）
  - 設計方針やコード構造のレビュー
- **ドキュメント作成**
  - READMEや設計ドキュメントの本文案を作成
  - 開発ルールやPRテンプレートの雛形を提示
- **思考の補助**
  - 「なぜそうするのか」を説明
  - Codexに渡す依頼文を一緒に作成

### 実際のやり方
- リポジトリを直接操作することはできない  
  → あなたが提示したコード・PRリンク・ログをもとに解説
- **典型的な相談例**
  - 「このPRの差分を解説して」
  - 「Bitflyer統合をどのレイヤーに置くべきか？」
  - 「READMEに追加する章立てを考えて」
- **成果物**
  - 雛形文章、設計方針、ロードマップ

---

## Codex（実習パートナー役）

### 出来ること
- **リポジトリ操作**
  - 新規プロジェクト・ファイル追加
  - 既存コード修正、テスト作成
  - READMEやdocsの編集、リンク修正
  - CI/CD（GitHub Actions）の設定変更
- **PR作成**
  - 変更は必ずPRとして提示
  - mainを直接壊さない（ブランチ保護を前提）

### 実際のやり方
- **Codexタブで依頼**
  - 「Bitflyer Public API の GetTicker を追加してPRを作成」
  - 「docs/design.md を追加し、READMEからリンクを貼り直す」
- **典型的なタスク**
  - ドキュメントファイル配置＋リンク修正
  - 簡単なリファクタリング（命名・コード整形）
  - 小さな機能追加（Public API呼び出しなど）
- **成果物**
  - PR（差分、テストログ、ターミナル出力付き）

---

## 運用スタイル（3人チームの流れ）

1. **ChatGPT（先生）** と方針やドキュメント雛形を決定  
2. **Codex（実習）** に小タスクを依頼 → PR作成  
3. **ChatGPT（先生）** にPRの差分やログを解説してもらう  
4. **あなた（オーナー）** が最終判断し、マージまたは修正依頼  

---

## 補足ルール

### コミュニケーションルール
- 設計・方針の相談 → ChatGPT  
- 実際のコード修正やPR → Codex  
- PRレビュー → あなた＋ChatGPTで確認

### タスク粒度の目安
- Codexに依頼するタスクは「1PR＝1目的」かつ30分以内に終わる規模が理想
- ChatGPTには「背景理解が必要なもの」を相談

### 失敗時のリカバリー
- CodexのPRが不適切 → ChatGPTにレビュー依頼して修正方針を決める
- テスト・ビルド失敗 → Codexに修正PRを依頼
- mainに問題が混入 → `git revert` で戻す

### 学びの視点
- PRレビューは理解の機会 → ChatGPTに「なぜこの差分か？」を必ず質問
- 「なぜ必要か？」を意識し、学習しながら進める

### 安全原則
- mainブランチは必ず保護する
- Secretsは人間のみが管理し、AIには渡さない
- APIキーやパスワードは直書き禁止、必ず環境変数／GitHub Secretsを利用

---

## まとめ
- **あなた**＝オーナー、方針と最終判断を行う  
- **ChatGPT**＝先生、概念・設計・ドキュメント内容に強い  
- **Codex**＝実習パートナー、コード変更・ドキュメント配置・PR作成が得意  

この分担により、**理解を深めながら安全に開発を進められる**。
